<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,minimum-scale=0.1"><title>签到</title><link rel="stylesheet" href="css/index.css"></head><body class="box box-ver"><div id="app" class="container box box-ver box-pc box-ac"><div class="tel-container box box-ver box-ac box-pc box-fh hide"><input id="company" type="text" placeholder="请输入公司名称" maxlength="20"> <input id="dutys" type="text" placeholder="请输入职务" maxlength="15"> <input id="name" type="text" placeholder="请输入姓名" maxlength="6"> <input id="tel" type="tel" placeholder="请输入手机号" maxlength="11"> <a href="javascript:" class="button box box-ac box-pc" data-type="0">签到</a></div><div class="code box box-ac box-pc hide box-ver"><div>您已签到，第<span id="nums"></span>个签到</div><img src="images/code.jpg" alt=""></div></div><div class="toast hide"></div><script src="js/concat.js"></script></body><script>function closeToast(){$(".toast").addClass("hide")}function openToast(e,n){$(".toast").html(e).removeClass("hide"),n&&setTimeout(function(){closeToast()},n)}function getQueryString(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(n);return null!=t?unescape(t[2]):null}function getUserInfo(){var e=getQueryString("code");$.ajax({type:"GET",url:"http://text.dmooo.xyz/signin/get_weixin_access_token?code="+e+"&signin_id=1",dataType:"json",timeout:1e4,success:function(e){1==e.status&&(is_signins=e.data.is_signins,1==is_signins?($("#nums").html(e.data.signins.nums),$(".code").removeClass("hide")):$(".tel-container").removeClass("hide"))},error:function(e,n){openToast("网络故障",2e3)}})}getUserInfo();var is_signins=0;$(".button").on("click",function(){var e=$("#company").val(),n=$("#dutys").val(),t=$("#name").val(),s=$("#tel").val();return e.length<2?(openToast("请填写有效的公司名",2e3),$("#company").focus(),!1):n.length<2?(openToast("请填写有效的职务",2e3),$("#dutys").focus(),!1):t.length<2?(openToast("请填写有效的姓名",2e3),$("#name").focus(),!1):/^1[34578]\d{9}$/.test(s)?void $.ajax({type:"POST",url:"http://text.dmooo.xyz/signin/weixin_phone",dataType:"json",timeout:1e4,data:{company:e,dutys:n,phone:s,realname:t,signin_id:1},success:function(e){if(1==e.status){var n=e.data.nums;$("#nums").html(n),$(".tel-container").addClass("hide"),setTimeout(function(){$(".code").removeClass("hide")},1)}else openToast(e.message,2e3)},error:function(e,n){openToast("错误,签到失败",2e3)}}):(openToast("请填写有效的手机号",2e3),$("#tel").focus(),!1)})</script></html>